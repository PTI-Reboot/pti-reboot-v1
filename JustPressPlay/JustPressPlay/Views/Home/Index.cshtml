@{
    ViewBag.Title = "Home Page";
}

@model JustPressPlay.ViewModels.TimelineViewModel


<!--
<div id="headerSection" class="homeNews activeNews">
    <div class="row">

        <div class="large-12 columns">
            <button id="showNewsButton" class="secondary small radius right">SHOW/HIDE</button>
            <h1><a href="#">JPP V3 - NOW WITH 73% MORE CSS</a></h1>
        </div>

        <!--
        <div class="large-4 columns">
            <div class="coloredTitle hide-for-small">
                <h1>JUST</h1>
                <h2>Press</h2>
                <h3>Play</h3>
            </div>
                
        </div>
        

    </div>
    <div class="row">
        <div class="large-4 columns">
            <p><img src="images/igmlab.jpg" style="width: 100%;" /></p>
        </div>
        <div class="large-8 columns">

            <p>This is the sample text for a news story. Here players will be informed about what's happening in the game. Information about quest and achievement avalibility will be posted in this very space. Right here. And any version updates will also likely be posted here. Like for instance this really nice version we are currently building. Ain't it purrdy? Filler filler filler, whoop whoop whoop.</p>
            <p class="right"><a href="#">Read more...</a></p>

        </div>



    </div>
</div>
-->

<div id="headerSection" class="homeNews activeNews">

    <div class="row">

        <div class="large-12 columns">
            <ul data-orbit>
                <li>
                    <div class="row">
                        <div class="large-4 columns">
                            <img src="http://placehold.it/500x300" />
                        </div>
                        <div class="large-8 columns">
                            <h2><a href="#">JPPV3 - NOW WITH 74% MORE CSS</a></h2>
                            <p>This is the sample text for a news story. Here players will be informed about what's happening in the game. Information about quest and achievement avalibility will be posted in this very space. Right here. And any version updates will also likely be posted here. Like for instance this really nice version we are currently building. Ain't it purrdy? Filler filler filler, whoop whoop whoop.</p>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="row">
                        <div class="large-4 columns">
                            <img src="http://placehold.it/500x300" />
                        </div>
                        <div class="large-8 columns">
                            <h2><a href="#">ACHERVEMERTS</a></h2>
                            <p>This is the sample text for a news story. Here players will be informed about what's happening in the game. Information about quest and achievement avalibility will be posted in this very space. Right here. And any version updates will also likely be posted here. Like for instance this really nice version we are currently building. Ain't it purrdy? Filler filler filler, whoop whoop whoop.</p>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="row">
                        <div class="large-4 columns">
                            <img src="http://placehold.it/500x300" />
                        </div>
                        <div class="large-8 columns">
                            <h2><a href="#">QUERSTS</a></h2>
                            <p>This is the sample text for a news story. Here players will be informed about what's happening in the game. Information about quest and achievement avalibility will be posted in this very space. Right here. And any version updates will also likely be posted here. Like for instance this really nice version we are currently building. Ain't it purrdy? Filler filler filler, whoop whoop whoop.</p>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        

    </div>

</div>

<div id="lowerBody">

    <div class="row">

        <div class="large-8 columns">

            <h3>RECENT ACTIVITY</h3>

            <div class="row">

                @if (WebSecurity.IsAuthenticated)
                {
                
                    <div class="large-6 columns">

                        <div class="timelineFeed">

                            <!--<p>Your Timeline</p>-->

                            @{
                                for (int i = Model.MyProfile.Earnings.Earnings.Count - 1; i >= 0; i--)
                                {
                                    JustPressPlay.ViewModels.EarningsViewModel.Earning e = Model.MyProfile.Earnings.Earnings.ElementAt(i);
                            
                                    <div class="timelinePost">

                                    @if (!String.IsNullOrWhiteSpace(e.StoryPhoto))
                                    {
                                        <div class="postPhoto">
                                            <img src="@Url.Content(e.StoryPhoto)" />
                                        </div>
                                    }

                                    <div class="postInfo">
                                        <div class="userPhoto">
                                            <a href="@Url.Action("" + e.PlayerID, "Players")">
                                                @if (!@e.PlayerImage.IsEmpty())
                                                {
                                                    <img src="@Url.Content(e.PlayerImage)" />
                                                }
                                                else
                                                {
                                                    <img src="@Url.Content("~/Content/Images/Jpp/defaultProfileAvatar.png")" />
                                                }
                                            </a>
                                        </div>
                                        <h1><a href="@Url.Action("" + e.PlayerID, "Players")">@e.DisplayName</a></h1>
                                        <h2>Earned <a href="@Url.Action("" + e.Achievement.ID, "Achievements")">@e.Achievement.Title</a></h2>
                                        <h3>@e.EarnedDate</h3>
                                    </div>
                        
                                    <div class="postBody">
                                    
                                        @if (!String.IsNullOrWhiteSpace(e.StoryText))
                                        {
                                            <p>@e.StoryText</p>
                                        }
                                        else
                                        {
                                            <p>@e.DisplayName hasen't added a story yet.</p>
                                        }

                                        <hr />
 
                                        <div class="commentsContainer">
                                            <h5>@e.Comments.Comments.Count Comments</h5>

                                            @if (WebSecurity.IsAuthenticated)
                                            {

                                                <hr />
                                                
                                                <div class="writeComment">
                                                    <div class="userPhoto hide-for-small">
                                                        @if (!String.IsNullOrWhiteSpace(ViewBag.userImage))
                                                        {
                                                            <img src="@Url.Content(ViewBag.userImage)" />
                                                        }
                                                        else
                                                        {
                                                            <img src="@Url.Content("~/Content/Images/Jpp/defaultProfileAvatar.png")" />
                                                        }
                                                    </div>
                                                    <div class="commentInput">
                                                        <input type="text" id="Text1" placeholder="Write a comment..." />
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                            
                                    <!-- End Feed Entry -->
                                </div>
                                }
                            }
 
                        </div>

                    </div>
                }


                <div class="
                    @if (WebSecurity.IsAuthenticated) 
                    { 
                        @: large-6
                    }
                    else 
                    { 
                        @: large-12
                    } 
                columns">

                    <div class="timelineFeed">

                        <!--<p>Public Timeline</p>-->

                        @{
                            for (int i = Model.OtherEarnings.Earnings.Count - 1; i >= 0; i--)
                            {
                                JustPressPlay.ViewModels.EarningsViewModel.Earning e = Model.OtherEarnings.Earnings.ElementAt(i);
                            
                                if ( e.PlayerID != WebSecurity.CurrentUserId )
                                {
                                    <div class="timelinePost">

                                @if (!String.IsNullOrWhiteSpace(e.StoryPhoto))
                                {
                                    <div class="postPhoto">
                                        <img src="@Url.Content(e.StoryPhoto)" />
                                    </div>
                                }

                                <div class="postInfo">
                                    <div class="userPhoto">
                                        <a href="@Url.Action("" + e.PlayerID, "Players")">
                                            @if (!@e.PlayerImage.IsEmpty())
                                            {
                                                <img src="@Url.Content(e.PlayerImage)" />
                                            }
                                            else
                                            {
                                                <img src="@Url.Content("~/Content/Images/Jpp/defaultProfileAvatar.png")" />
                                            }
                                        </a>
                                    </div>
                                    <h1><a href="@Url.Action("" + e.PlayerID, "Players")">@e.DisplayName</a></h1>
                                    <h2>Earned <a href="@Url.Action("" + e.Achievement.ID, "Achievements")">@e.Achievement.Title</a></h2>
                                    <h3>@e.EarnedDate</h3>
                                </div>
                        
                                <div class="postBody">
                                    
                                    @if (!String.IsNullOrWhiteSpace(e.StoryText))
                                    {
                                        <p>@e.StoryText</p>
                                    }
                                    else
                                    {
                                        <p>@e.DisplayName hasen't added a story yet.</p>
                                    }

                                    <hr />
 
                                    <div class="commentsContainer">
                                        <h5>@e.Comments.Comments.Count Comments</h5>

                                        @if (WebSecurity.IsAuthenticated)
                                        {

                                            <hr />

                                            <div class="writeComment">
                                                <div class="userPhoto hide-for-small">
                                                    @if (!@e.PlayerImage.IsEmpty())
                                                    {
                                                        <img src="@Url.Content(e.PlayerImage)" />
                                                    }
                                                    else
                                                    {
                                                        <img src="@Url.Content("~/Content/Images/Jpp/defaultProfileAvatar.png")" />
                                                    }
                                                </div>
                                                <div class="commentInput">
                                                    <input type="text" id="Text1" placeholder="Write a comment..." />
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>
                            
                                <!-- End Feed Entry -->
                            </div>
                                }
                            }
                        }

                    </div>

                </div>

            </div>

        </div>
            

        <div id="sidebar" class="large-4 columns">

            <h3>GAMEWIDE STATS</h3>

            <div class="statsGroup">
                <div id="gamewideStatsQuad"></div>

                <h4>@Model.Stats.TotalPlayers           @if (@Model.Stats.TotalPlayers == 1) { <span>player</span> }
                                                        else { <span>players</span> }</h4>
                <h4>@Model.Stats.TotalQuests            @if (@Model.Stats.TotalQuests == 1) { <span>quest</span> }
                                                        else { <span>quests</span> }</h4>
                <h4>@Model.Stats.TotalAchievements      @if (@Model.Stats.TotalAchievements == 1) { <span>achievement</span> }
                                                        else { <span>achievements</span> }</h4>
            </div>

            @if( WebSecurity.IsAuthenticated )
            {
                <h3>YOUR STATS</h3>
                <div class="statsGroup">
                    <div id="yourStatsQuad"></div>
                    
                    <h4>@Model.MyProfile.Friends.People.Count               @if (@Model.MyProfile.Friends.People.Count == 1) { <span>friend</span> }
                                                                            else { <span>friends</span> }</h4>
                    <h4>@Model.MyProfile.Quests.Quests.Count                @if (@Model.MyProfile.Quests.Quests.Count == 1) { <span>quest</span> }
                                                                            else { <span>quests</span> }</h4>
                    <h4>@Model.MyProfile.Achievements.Achievements.Count    @if (@Model.MyProfile.Achievements.Achievements.Count == 1) { <span>achievement</span> }
                                                                            else { <span>achievements</span> }</h4>
                </div>
            }
                

            <footer class="small">

                @{ Html.RenderPartial("_Footer"); }

            </footer>

        </div> <!-- END lowerBodySidebar -->

            

    </div>

    <div class="row">
        <div class="large-8 columns">
            <div class="timelineFeed">
                <div class="endOfFeed">
                    <h6>End of feed</h6>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="@Url.Content("~/Content/js/plugin/jquery.jppquad.js")" type="text/javascript"></script>
<script>
    $(document).ready(function () {
        $('#gamewideStatsQuad').jppquad({
            thresholds: {
                0: 25,
                1: 50,
                2: 75
            },
            maxThreshold: 100,
            createPoints: '@Model.Stats.PointsCreate',
            learnPoints: '@Model.Stats.PointsLearn',
            explorePoints: '@Model.Stats.PointsExplore',
            socializePoints: '@Model.Stats.PointsSocialize'
        });
    });
</script>

@if( WebSecurity.IsAuthenticated )
{
    <script>
        $(document).ready(function () {
            $('#yourStatsQuad').jppquad({
                thresholds: {
                    0: 25,
                    1: 50,
                    2: 75
                },
                maxThreshold: 100,
                createPoints: '@Model.MyProfile.PointsCreate',
                learnPoints: '@Model.MyProfile.PointsLearn',
                explorePoints: '@Model.MyProfile.PointsExplore',
                socializePoints: '@Model.MyProfile.PointsSocialize'
            });
        });
    </script>
}

<!--

<h2>Timeline</h2>

<p>Site Stats:</p>
<ul>
    <li>Points Create: @Model.Stats.PointsCreate</li>
	<li>Points Explore: @Model.Stats.PointsExplore</li>
	<li>Points Learn: @Model.Stats.PointsLearn</li>
	<li>Points Socialize: @Model.Stats.PointsSocialize</li>
	<li>Players: @Model.Stats.TotalPlayers</li>
	<li>Achievements: @Model.Stats.TotalAchievements</li>
	<li>Quests: @Model.Stats.TotalQuests</li>
</ul>

@if( WebSecurity.IsAuthenticated )
{
	<p>Your Stats:</p>
	<ul>
		<li>My Points Create: @Model.MyProfile.PointsCreate</li>
		<li>My Points Explore: @Model.MyProfile.PointsExplore</li>
		<li>My Points Learn: @Model.MyProfile.PointsLearn</li>
		<li>My Points Socialize: @Model.MyProfile.PointsSocialize</li>
		<li>My Achievements: @Model.MyProfile.Achievements.Achievements.Count</li>
		<li>My Quests: @Model.MyProfile.Quests.Quests.Count</li>
		<li>My Friends: @Model.MyProfile.Friends.People.Count</li>
	</ul>
	
	<p>Your Timeline</p>
	<ul>
		@foreach (JustPressPlay.ViewModels.EarningsViewModel.Earning e in Model.MyProfile.Earnings.Earnings)
		{
			<li>
				Achievement Earning!
				<ul>
					<li>@e.DisplayName</li>
					<li>@if(!String.IsNullOrWhiteSpace(e.PlayerImage)){<img src="@Url.Content(e.PlayerImage)" />}</li>
					<li>@e.EarnedDate</li>
					<li>@e.Achievement.Title</li>
					<li>Story Photo: @if(!String.IsNullOrWhiteSpace(e.StoryPhoto)) {<img src="@Url.Content(e.StoryPhoto)" />}</li>
					<li>Story Text: @e.StoryText</li>
					<li>Comment Count: @e.Comments.Comments.Count</li>
				</ul>
			</li>
		}
	</ul>
}

<p>Public Timeline:</p>
<ul>
	@foreach (JustPressPlay.ViewModels.EarningsViewModel.Earning e in Model.OtherEarnings.Earnings)
	{
		<li>
			Achievement Earning!
			<ul>
				<li>@e.DisplayName</li>
				<li>@if(!String.IsNullOrWhiteSpace(e.PlayerImage)){<img src="@Url.Content(e.PlayerImage)" />}</li>
				<li>@e.EarnedDate</li>
				<li>@e.Achievement.Title</li>
				<li>Story Photo: @if(!String.IsNullOrWhiteSpace(e.StoryPhoto)) {<img src="@Url.Content(e.StoryPhoto)" />}</li>
				<li>Story Text: @e.StoryText</li>
				<li>Comment Count: @e.Comments.Comments.Count</li>
			</ul>
		</li>
	}
</ul>

-->